<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.780986171a3ec41f644d.css">.banner-module--image--1QG6I{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.banner-module--imageContainer--3KrUF{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.banner-module--wrapper--1xRxG{height:100%}.banner-module--header--37G4J{background:50%/cover #00003d;position:relative;padding-top:2em;padding-bottom:3em}.banner-module--container--ocgDf{position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(0,0,61,.6)}.tiles-module--image--1-ejc{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.tiles-module--imageContainer--9DUT4{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.tiles-module--wrapper--2oIOd{height:100%}.tiles-module--tile--2kwde{display:-webkit-flex;display:flex;-webkit-flex:1 1;flex:1 1;padding:2em;position:relative}.tiles-module--tile--2kwde a{color:#fcfcfd;text-decoration:none}.tiles-module--tile--2kwde h3,.tiles-module--tile--2kwde p{position:relative}.tiles-module--tile--2kwde h3{border-bottom:.1em dotted #fcfcfd;margin-top:0}.tiles-module--tile--2kwde .tiles-module--date--aIswY{border-top:1px solid #fcfcfd;display:inline-block}.tiles-module--tileContainer--3FpOW{width:100%;height:calc(33vw - 2em);display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:stretch;justify-content:stretch;margin-top:2em;margin-bottom:2em}.tiles-module--blackout--ElFOE{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,61,.6)}.tags-module--tagsLabel--1AV4E{display:inline-block;margin-right:.5em}.tags-module--tag--3kCeK{display:inline-block;margin-right:.25em;white-space:nowrap}.tags-module--tag--3kCeK a{color:#2a2a37;text-decoration:none;border-bottom:1px dotted #2a2a37}.sourcepost-module--root--WEjHy{margin:1em -2em;padding:1em 2em;background:linear-gradient(90deg,#d0d0dc 0,#d0d0dc 8px,#eeeef2 0)}.header-module--menuLink--17w_4{margin-right:.5em;color:#fcfcfd}.header-module--active--2pIok{color:#f0194b}.header-module--root--3b321{background:#2a2a37;padding:.5em}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}html{font-family:Roboto,sans-serif}h1,h2,h3,h4,h5,h6{font-family:Open Sans,sans-serif}img{max-width:100%}body{margin:0;padding:0;background:#fcfcfd}html{font-size:16px;line-height:1.5}@media (min-width:320px){html{font-size:calc(16px + (200vw - 640px)/1046)}}@media (min-width:1366px){html{font-size:18px}}h1{font-size:2em}@media (min-width:20em){h1{font-size:calc(2em + (100vw - 20em)/50)}}@media (min-width:70em){h1{font-size:3em}}pre{overflow:scroll;background:#eeeef2;padding:.5em;margin:2em -.5em}.bodyContent{box-sizing:border-box;margin:0 auto;max-width:60em;padding-left:16px;padding-right:16px}@media (min-width:320px){.bodyContent{padding-left:calc(7.14286vw - 6.85714px)}}@media (min-width:768px){.bodyContent{padding-left:48px}}@media (min-width:320px){.bodyContent{padding-right:calc(7.14286vw - 6.85714px)}}@media (min-width:768px){.bodyContent{padding-right:48px}}hr{background:#2a2a37;border:0;height:1px;margin:0 auto;max-width:60em;overflow:visible;text-align:center}@media (min-width:20em){hr{margin-top:calc(2em + (200vw - 40em)/50)}}@media (min-width:70em){hr{margin-top:4em}}@media (min-width:20em){hr{margin-bottom:calc(2em + (200vw - 40em)/50)}}@media (min-width:70em){hr{margin-bottom:4em}}hr:after{background:#fcfcfd;content:"\2022   \2022   \2022";display:inline-block;font-size:1.4em;padding:0 .4em;position:relative;top:-.7em}hr.endPost{background:#f0194b}hr.endPost:after{color:#f0194b;content:"END";font-size:.7em;top:-1.2em}p>.gatsby-resp-image-link{width:calc(50% - .5em);float:left}p>.gatsby-resp-image-link:first-child{margin-right:1em}p>.gatsby-resp-image-link:last-child:after{content:"";display:block;float:none}p>.gatsby-resp-image-link:only-child{float:none;width:100%;margin-right:0}p>img{max-width:100%;width:auto;margin:0 auto}blockquote{position:relative;padding:1em 3.33em;margin:1em 0;background:#e3f4fb;font-style:italic}blockquote:before{content:"\201C";top:0;left:.33em}blockquote:after,blockquote:before{font-style:normal;font-family:serif;font-weight:700;position:absolute;font-size:3em;color:#00b0f0}blockquote:after{content:"\201D";bottom:0;right:.33em}.external-profiles{display:-webkit-flex;display:flex;list-style:none;margin:0;padding:0}.external-profiles li{display:-webkit-flex;display:flex;-webkit-flex:1 1 auto;flex:1 1 auto;margin:.5em;padding:1em .5em;text-align:center;border:.1em solid}.external-profiles li:first-child{margin-left:0}.external-profiles li:last-child{margin-right:0}.external-profiles li a{margin:auto}.external-profiles li svg{width:100%;height:2em}</style><meta name="generator" content="Gatsby 2.3.24"/><title data-react-helmet="true">Simple Box2D - Custom Polygon creation. | Psyked: James&#x27; Web Development website</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:site" content="@psyked"/><meta data-react-helmet="true" name="twitter:creator"/><meta data-react-helmet="true" name="twitter:title" content="Simple Box2D - Custom Polygon creation."/><meta data-react-helmet="true" name="twitter:description"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-02f49ce09c384d3de99f.js"/><link as="script" rel="preload" href="/app-b4c7c5a751c66bcac7f5.js"/><link as="script" rel="preload" href="/10-1d4e27b19692d6b54d15.js"/><link as="script" rel="preload" href="/1-1e7fdda0a90b05b5dee1.js"/><link as="script" rel="preload" href="/styles-2ff1b9acc88c62f21cac.js"/><link as="script" rel="preload" href="/webpack-runtime-f634282b27030d070915.js"/><link as="fetch" rel="preload" href="/static/d/244/path---blog-simple-box-2-d-custom-polygon-creation-671-ffb-ZxnJDxjmjvCQsSjtkW2niJy12o.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><header class="banner-module--header--37G4J"><div class="banner-module--container--ocgDf"></div><div class="bodyContent" style="color:white;position:relative"><header><h1>Simple Box2D - Custom Polygon creation.</h1></header><aside>Published: <!-- -->11 Jan 2010</aside></div></header><div class="bodyContent"><div><p>I've been working on some classes to simplify Box2D for Actionscript developers (See <a href="http://www.psyked.co.uk/actionscript/simplifying-box2das3.htm">previous post</a> for a quick intro).  The latest update to these classes introduces couple of minor ideas, and one gosh-darned awesome idea, if I do say so myself.  Let's start with the awesome things, and move on from there...</p>
<h3>Awesome thing: Creating Custom Polygons</h3>
<p>Or rather the methods for creating them.  Shapes in Box2D come in three basic flavours - circle, rectangle and custom polygon.  Moreover, everything must be convex (no inny bits), have no more than 8 sides, and can't have holes.  On the plus side you can still make larger, more complex objects out of smaller ones - but it all involves a lot of thinking.</p>
<p>So, here's the solution - or rather, the options.</p>
<p><strong>Polygon creation option #1 - Creating a polygon from an array of points.</strong></p>
<p>Using some clever triangulation code from <a href="http://www.splashdust.net/2009/10/box2d-mouse-drawing-now-with-ear-clipping/">Splashdust.net</a>, there's a simple method for creating any custom shape from an array of Point objects.  With this method you can create a shape with any number of sides, and not worry about whether the shape is concave or convex.  It'll still break if the edges of your shape interest each other, and doesn't support holes in the objects you're creating, but it's a start.</p>
<object width="500" height="280">
<param name="movie" value="/content/images/2010/01/ComplexPolygonExample.swf">
<embed src="/content/images/2010/01/ComplexPolygonExample.swf" width="500" height="280">
</embed>
</object>
<pre><code>var array:Array = [ 
    new Point( 0, 0 ), 
    new Point( 10, 0 ),
    new Point( 10, 10 ), 
    new Point( 20, 10 ), 
    new Point( 20, 0 ), 
    new Point( 30, 0 ), 
    new Point( 30, 30 ), 
    new Point( 0, 30 ) 
];

world.createComplexPolygon( 50, 50, array );
</code></pre>
<p><strong>Polygon creation option #2 - Creating a polygon from a shape in a library.</strong></p>
<p><strong><a href="flashshapedemo.jpg"><span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 500px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAgP/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAF6ZfWTJ0B//8QAGhAAAwEAAwAAAAAAAAAAAAAAAQIDEQQSFf/aAAgBAQABBQKrNMeg+SbvIoroeJDFAUf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGn/8QAHRAAAgIBBQAAAAAAAAAAAAAAAAECEQMhMTIzUf/aAAgBAQAGPwKeS7SWiOCIy9KkrR1opbI//8QAGxAAAwEBAAMAAAAAAAAAAAAAAAERITFxkbH/2gAIAQEAAT8hlug3906MvI9jkWEZWLSj9GJK5wR//9oADAMBAAIAAwAAABCXD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABcRAAMBAAAAAAAAAAAAAAAAAAEQETH/2gAIAQIBAT8QNav/xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMVFBkf/aAAgBAQABPxBFgQ6Gyw7enkUatNXeCgK8PMysGQE3CgYhTp9g/wA1B4T/2Q=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;"
        alt="flashshapedemo"
        title=""
        src="/static/d380b041afd8e774624f382253d0ab80/48a11/flashshapedemo.jpg"
        srcset="/static/d380b041afd8e774624f382253d0ab80/3b5c6/flashshapedemo.jpg 158w,
/static/d380b041afd8e774624f382253d0ab80/434a1/flashshapedemo.jpg 315w,
/static/d380b041afd8e774624f382253d0ab80/48a11/flashshapedemo.jpg 500w"
        sizes="(max-width: 500px) 100vw, 500px"
      />
  </span></a></strong></p>
<p>This is where things get cool.  Creating a shape from a series of points is all well and good, but it's a laborious process to set up and modify.  You can create a shape in the Flash IDE, add your symbol to your library and import it to Box2D.  Currently this method only supports single shapes on a single layer, and only straight edges - but multiple shapes, layers and curved edges are definitely on the list for the future.</p>
<object width="500" height="280">
<param name="movie" value="/content/images/2010/01/LibraryShapeExample.swf">
<embed src="/content/images/2010/01/LibraryShapeExample.swf" width="500" height="280">
</embed>
</object>
<pre><code>world.createPolyFromLibraryShape( 300, 100, "sampleShape", "vectorassets.swf" );
</code></pre>
<h3>Minor thing #1: Mouse interaction</h3>
<p>What fun is a simulation if you can't interact with it? So we now have an easy way to add mouse joints to move things about.  In the next version it's my plan to add a method for filtering out objects, presumably based on each bodies userData.</p>
<pre><code>world.mouseInteraction = true;
</code></pre>
<h3>Minor thing #2: Framerate-independent animation.</h3>
<p>I stole this idea wholeheartedly from <a href="http://actionsnippet.com/?p=1471">QuickBox2D</a>.  Too good an idea to pass up I'm afraid, this just means that the simulation of the Box2D world is based on a timer, not a framerate.  In theory then, the simulation doesn't slow down or speed up depending on the framerate - which is useful for many things, like graphic-intensive applications and/or memory optimisation.</p>
<pre><code>world.framerateIndependantAnimation = true;
</code></pre>
<p>And here's some code for a quick example with framerate independent animation and mouse interaction enabled;</p>
<pre><code>var options:Box2DWorldOptions = new Box2DWorldOptions( 500, 280, 30, 9.8 );
    options.setWorldEdges( true, true, true, true );
var world:Box2DWorld = Box2DUtils.createBoxedWorld( options );
    world.debugDraw = true;
    world.mouseInteractExclusions = new Array();
    world.mouseInteraction = true;
    world.framerateIndependantAnimation = true;
addChild( world );
</code></pre>
<p>I've compiled all of my source files into a handy project file if you want to take a look.  Documentation and comments are a bit sparse, but hopefully it'll prove useful!</p>
<h2><a href="/content/images/2010/01/box2dutils.zip">Download the project files [Zip, 48kb]</a></h2>
<p><a href="simples.jpg"><span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 500px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAADAQT/2gAMAwEAAhADEAAAAUF0jo1EkT//xAAaEAACAwEBAAAAAAAAAAAAAAAAAQIRIRIx/9oACAEBAAEFAonevCJdN+//xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIRMf/aAAgBAwEBPwGTpCw//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BJ//EABoQAAEFAQAAAAAAAAAAAAAAABAAAQIxYXH/2gAIAQEABj8CVcMscf/EABsQAAIDAQEBAAAAAAAAAAAAAAABESExQVHR/9oACAEBAAE/IUKou/WiNr+mRNA4RWFmk//aAAwDAQACAAMAAAAQG8//xAAXEQEBAQEAAAAAAAAAAAAAAAABABEh/9oACAEDAQE/EG4T0X//xAAXEQEBAQEAAAAAAAAAAAAAAAABACEx/9oACAECAQE/EALs9v/EABwQAQEAAgMBAQAAAAAAAAAAAAERACExQVFhkf/aAAgBAQABPxAZy8XDnqbU158xiGKCb7HpgI0fmai9iHZbivhb5n//2Q=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;"
        alt="simples"
        title=""
        src="/static/51da6ce8b7bf93f345149ce9624cd8f1/48a11/simples.jpg"
        srcset="/static/51da6ce8b7bf93f345149ce9624cd8f1/3b5c6/simples.jpg 158w,
/static/51da6ce8b7bf93f345149ce9624cd8f1/434a1/simples.jpg 315w,
/static/51da6ce8b7bf93f345149ce9624cd8f1/48a11/simples.jpg 500w"
        sizes="(max-width: 500px) 100vw, 500px"
      />
  </span></a></p>
<p>Simples!</p></div><hr class="endPost"/><aside></aside><aside><span class="tags-module--tagsLabel--1AV4E">Tagged as:</span><span class="tags-module--tag--3kCeK"><a href="/tag/actionscript">actionscript</a><span>, </span></span><span class="tags-module--tag--3kCeK"><a href="/tag/box2d">box2d</a></span></aside></div><aside class="bodyContent tiles-module--tileContainer--3FpOW"><section class="tiles-module--tile--2kwde"><a href="/blog/demo-source-simple-box2d-with-curved-edges/"><div class="tiles-module--blackout--ElFOE"></div><h3>Demo &amp; Source: Simple Box2D, with curved edges!</h3><p></p><p class="tiles-module--date--aIswY">13 Jan 2010</p></a></section><section class="tiles-module--tile--2kwde"><a href="/blog/simplifying-box2das3/"><div class="tiles-module--blackout--ElFOE"></div><h3>Simplifying Box2DAS3...</h3><p></p><p class="tiles-module--date--aIswY">08 Jan 2010</p></a></section></aside></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"blog-simple-box-2-d-custom-polygon-creation-671","path":"/blog/simple-box2d-custom-polygon-creation/"};window.dataPath="244/path---blog-simple-box-2-d-custom-polygon-creation-671-ffb-ZxnJDxjmjvCQsSjtkW2niJy12o";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-b4c7c5a751c66bcac7f5.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-02f49ce09c384d3de99f.js"],"component---src-templates-tag-list-template-js":["/component---src-templates-tag-list-template-js-8f6f40d7d3b107c1cf69.js"],"component---src-pages-blog-jsx":["/component---src-pages-blog-jsx-bb5dff0f0123199266d6.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-53b27c93cdf9b69aa294.js"],"component---src-pages-tags-jsx":["/component---src-pages-tags-jsx-32ca1525a8dbb5ef3aa5.js"],"pages-manifest":["/pages-manifest-b72a0c19b0d07657a619.js"]};/*]]>*/</script><script src="/webpack-runtime-f634282b27030d070915.js" async=""></script><script src="/styles-2ff1b9acc88c62f21cac.js" async=""></script><script src="/1-1e7fdda0a90b05b5dee1.js" async=""></script><script src="/10-1d4e27b19692d6b54d15.js" async=""></script><script src="/app-b4c7c5a751c66bcac7f5.js" async=""></script><script src="/component---src-templates-blog-post-js-02f49ce09c384d3de99f.js" async=""></script></body></html>