<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.a57798ad4d86c86d7e4b.css">.tiles-module--image--1-ejc{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.tiles-module--imageContainer--9DUT4{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.tiles-module--wrapper--2oIOd{height:100%}.tiles-module--tile--2kwde{display:-webkit-flex;display:flex;-webkit-flex:1 1;flex:1 1;padding:2em;position:relative}.tiles-module--tile--2kwde a{color:#fcfcfd;text-decoration:none}.tiles-module--tile--2kwde h3,.tiles-module--tile--2kwde p{position:relative}.tiles-module--tile--2kwde h3{border-bottom:.1em dotted #fcfcfd;margin-top:0}.tiles-module--tile--2kwde .tiles-module--date--aIswY{border-top:1px solid #fcfcfd;display:inline-block}.tiles-module--tileContainer--3FpOW{width:100%;height:calc(33vw - 2em);display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:stretch;justify-content:stretch;margin-top:2em;margin-bottom:2em}.tiles-module--blackout--ElFOE{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,61,.6)}.tags-module--tagsLabel--1AV4E{display:inline-block;margin-right:.5em}.tags-module--tag--3kCeK{display:inline-block;margin-right:.25em;white-space:nowrap}.tags-module--tag--3kCeK a{color:#2a2a37;text-decoration:none;border-bottom:1px dotted #2a2a37}.sourcepost-module--root--WEjHy{margin:1em -2em;padding:1em 2em;background:linear-gradient(90deg,#d0d0dc 0,#d0d0dc 8px,#eeeef2 0)}.header-module--menuLink--17w_4{margin-right:.5em;color:#fcfcfd}.header-module--active--2pIok{color:#f0194b}.header-module--root--3b321{background:#2a2a37;padding:.5em}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}html{font-family:Roboto,sans-serif}h1,h2,h3,h4,h5,h6{font-family:Open Sans,sans-serif}img{max-width:100%}body{margin:0;padding:0;background:#fcfcfd}html{font-size:16px;line-height:1.5}@media (min-width:320px){html{font-size:calc(16px + (200vw - 640px)/1046)}}@media (min-width:1366px){html{font-size:18px}}h1{font-size:2em}@media (min-width:20em){h1{font-size:calc(2em + (100vw - 20em)/50)}}@media (min-width:70em){h1{font-size:3em}}pre{overflow:scroll;background:#eeeef2;padding:.5em;margin:2em -.5em}.bodyContent{box-sizing:border-box;margin:0 auto;max-width:60em;padding-left:16px;padding-right:16px}@media (min-width:320px){.bodyContent{padding-left:calc(7.14286vw - 6.85714px)}}@media (min-width:768px){.bodyContent{padding-left:48px}}@media (min-width:320px){.bodyContent{padding-right:calc(7.14286vw - 6.85714px)}}@media (min-width:768px){.bodyContent{padding-right:48px}}hr{background:#2a2a37;border:0;height:1px;margin:0 auto;max-width:60em;overflow:visible;text-align:center}@media (min-width:20em){hr{margin-top:calc(2em + (200vw - 40em)/50)}}@media (min-width:70em){hr{margin-top:4em}}@media (min-width:20em){hr{margin-bottom:calc(2em + (200vw - 40em)/50)}}@media (min-width:70em){hr{margin-bottom:4em}}hr:after{background:#fcfcfd;content:"\2022   \2022   \2022";display:inline-block;font-size:1.4em;padding:0 .4em;position:relative;top:-.7em}hr.endPost{background:#f0194b}hr.endPost:after{color:#f0194b;content:"END";font-size:.7em;top:-1.2em}p>.gatsby-resp-image-link{width:calc(50% - .5em);float:left}p>.gatsby-resp-image-link:first-child{margin-right:1em}p>.gatsby-resp-image-link:last-child:after{content:"";display:block;float:none}p>.gatsby-resp-image-link:only-child{float:none;width:100%;margin-right:0}p>img{max-width:100%;width:auto;margin:0 auto}blockquote{position:relative;padding:1em 3.33em;margin:1em 0;background:#e3f4fb;font-style:italic}blockquote:before{content:"\201C";top:0;left:.33em}blockquote:after,blockquote:before{font-style:normal;font-family:serif;font-weight:700;position:absolute;font-size:3em;color:#00b0f0}blockquote:after{content:"\201D";bottom:0;right:.33em}.external-profiles{display:-webkit-flex;display:flex;list-style:none;margin:0;padding:0}.external-profiles li{display:-webkit-flex;display:flex;-webkit-flex:1 1 auto;flex:1 1 auto;margin:.5em;padding:1em .5em;text-align:center;border:.1em solid}.external-profiles li:first-child{margin-left:0}.external-profiles li:last-child{margin-right:0}.external-profiles li a{margin:auto}.external-profiles li svg{width:100%;height:2em}</style><meta name="generator" content="Gatsby 2.7.1"/><title data-react-helmet="true">ActionScript 2 - XML CDATA returns undefined, or htmlText doesn&#x27;t work! | James Ford</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:site" content="@psyked"/><meta data-react-helmet="true" name="twitter:creator"/><meta data-react-helmet="true" name="twitter:title" content="ActionScript 2 - XML CDATA returns undefined, or htmlText doesn&#x27;t work!"/><meta data-react-helmet="true" name="twitter:description"/><style data-styled="gRjVAE hlSqCg" data-styled-version="4.2.0">
/* sc-component-id: Banner__Wrapper-hibpma-0 */
.gRjVAE{background:center center / cover $border;position:relative;padding-top:2em;padding-bottom:3em;}
/* sc-component-id: Banner__Overlay-hibpma-1 */
.hlSqCg{position:absolute;width:100%;height:100%;top:0px;left:0px;background:rgba($border,0.6);}</style><link as="script" rel="preload" href="/component---src-templates-blog-post-js-ceb71cbd593f5997e7c9.js"/><link as="script" rel="preload" href="/app-523774c7d59d91decc83.js"/><link as="script" rel="preload" href="/11-136b333296f119c7f06b.js"/><link as="script" rel="preload" href="/1-3e750456ca4431761d32.js"/><link as="script" rel="preload" href="/styles-febc33b797b051cb2e7a.js"/><link as="script" rel="preload" href="/webpack-runtime-f49c063d17dec9ee358c.js"/><link as="fetch" rel="preload" href="/static/d/69/path---blog-actionscript-2-xml-cdata-returns-undefined-or-htmltext-doesnt-work-55-b-c51-D6f8YGWXG2KIxDZHqvfFxS5YtiE.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><header class="header-module--root--3b321"><nav class="bodyContent"><a class="header-module--menuLink--17w_4" href="/">Home</a><a class="header-module--menuLink--17w_4" href="/blog/">Blog Archive</a><a class="header-module--menuLink--17w_4" href="/speaking/">Public Speaking</a></nav></header><main><header class="Banner__Wrapper-hibpma-0 gRjVAE"><aside class="Banner__Overlay-hibpma-1 hlSqCg"></aside><div class="bodyContent" style="color:white;position:relative"><header><h1>ActionScript 2 - XML CDATA returns undefined, or htmlText doesn&#x27;t work!</h1></header><aside>Published: <!-- -->17 Sep 2008</aside></div></header><div class="bodyContent"><div><h3>The problem:</h3>
<p>Your XML file is fine, it validates as XML.  The file encoding and the xml declaration encoding match.  You can parse the XML, but when you try and put html inside a CDATA element, and then populate a dynamic textbox with it, either your formatting doesn't work (the text still has <b> tags in) or it returns 'undefined'.</p>
<h3>The solution:</h3>
<p>This could actually be a twofold problem, and is not helped along by Flash's quirks.  Its most likely that you're either;</p>
<ul>
<li>Accessing the XMLNode incorrectly,</li>
</ul>
<p>Or</p>
<ul>
<li>Being tripped up by the Flash players' slightly dodgy XML parsing.</li>
</ul>
<h3>Accessing CDATA correctly</h3>
<p>Now, the way that you should be accessing CDATA in Flash is perhaps a little different to what you'd expect.  CDATA should have no effect on how you access your XML - it's a parsing instruction, right?.  Well Flash treats it as part of the XML structure, so if you want to access the data inside the CDATA element, you have to treat the CDATA as a node in itself.  Its actually quite easy though.  Instead of accessing the contents of CDATA with childNode.nodeValue or childNodes, you should be using <strong>childNode.firstChild.nodeValue</strong>.</p>
<p>So childNode is the parent node of the CDATA element, firstChild is the actual CDATA instruction, and nodeValue extracts everything that's inside the CDATA element.</p>
<p>That hopefully, will solve any problems with 'undefined' appearing when you try to access data inside a CDATA element.</p>
<h3>Flash players' dodgy XML parsing?</h3>
<p>Yes indeedy, Flash does do things a little different.  CDATA is great because you can put nearly anything inside it, and the XML will still parse correctly.  Whatever's inside your CDATA should not be interpreted by anything else, and won't break anything that tries to read it.</p>
<p>Flash however, still does a little bit of work to it.  If you run a few traces on HTML formatting that you try to send via CDATA, you'll notice that all of the &#x3C; and > characters are transformed into their encoded versions, &#x3C; and >. This poses a minor problem because if you just try to whack HTML from your XML into a dynamic textbox, the formatting won't work properly and you'll get the characters &#x3C; and > appearing, along with the HTML formatting commands - because the &#x3C; and > characters are encoded.</p>
<p>Annoying yes, easy to fix - yes.</p>
<p>Find and replace is your ally here - or as near as we can easily get;</p>
<blockquote>
<p>xmlcdata<strong>.split('&#x3C;').join('>').split('>').join('>')</strong></p>
</blockquote>
<p>Run that on your string of text before you put it into your textbox and you're good to go!</p>
<h3>Quirks?</h3>
<p>What you also might find is that HTML formatted textboxes could actually display the contents of a CDATA node without the CDATA node being correctly accessed.  If you access the node with the childNodes property, and put that into your textbox, then the contents will display, but not with HTML formatting.</p>
<p>What Flash is actually doing is grabbing the CDATA element (and everything inside it).  Assigning this variable to a textbox <em>should fail</em>, but in actual fact it works - to a certain extent.  It seems like the HTML formatting of the textbox allows it to parse the XML element and then consiquently display the content within.  The problem then comes when you want to manipulate this data - the contents of the textboxes' text is not actually a string, but an XMLNode.  Weird, huh?</p></div><hr class="endPost"/><aside></aside><aside><span class="tags-module--tagsLabel--1AV4E">Tagged as:</span><span class="tags-module--tag--3kCeK"><a href="/tag/actionscript">actionscript</a><span>, </span></span><span class="tags-module--tag--3kCeK"><a href="/tag/flash">flash</a><span>, </span></span><span class="tags-module--tag--3kCeK"><a href="/tag/cdata">cdata</a><span>, </span></span><span class="tags-module--tag--3kCeK"><a href="/tag/quirks">quirks</a><span>, </span></span><span class="tags-module--tag--3kCeK"><a href="/tag/xml">xml</a></span></aside></div><aside class="bodyContent tiles-module--tileContainer--3FpOW"><section class="tiles-module--tile--2kwde"><a href="/blog/back-to-school-top-10-adobe-flex-and-air-applications-for-students/"><div class="tiles-module--blackout--ElFOE"></div><h3>Back to School: Top 10 Adobe Flex and AIR applications for students</h3><p></p><p class="tiles-module--date--aIswY">18 Sep 2008</p></a></section><section class="tiles-module--tile--2kwde"><a href="/blog/google-analytics-unveiled/"><div class="tiles-module--blackout--ElFOE"></div><h3>Google Analytics — Unveiled.</h3><p></p><p class="tiles-module--date--aIswY">12 Sep 2008</p></a></section></aside></main><footer id="footer"></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"blog-actionscript-2-xml-cdata-returns-undefined-or-htmltext-doesnt-work-55b","path":"/blog/actionscript-2-xml-cdata-returns-undefined-or-htmltext-doesnt-work/"};window.dataPath="69/path---blog-actionscript-2-xml-cdata-returns-undefined-or-htmltext-doesnt-work-55-b-c51-D6f8YGWXG2KIxDZHqvfFxS5YtiE";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-523774c7d59d91decc83.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-ceb71cbd593f5997e7c9.js"],"component---src-templates-tag-list-template-js":["/component---src-templates-tag-list-template-js-c735563daaace564cd21.js"],"component---src-pages-blog-jsx":["/component---src-pages-blog-jsx-5991289efbc91f642db0.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-67a21b35f9ec9a4411d9.js"],"component---src-pages-speaking-jsx":["/component---src-pages-speaking-jsx-7564fbf9ad5033a58d45.js"],"component---src-pages-tags-jsx":["/component---src-pages-tags-jsx-e2841dbac4f3e179db90.js"],"pages-manifest":["/pages-manifest-97bafc6c5321409a3156.js"]};/*]]>*/</script><script src="/webpack-runtime-f49c063d17dec9ee358c.js" async=""></script><script src="/styles-febc33b797b051cb2e7a.js" async=""></script><script src="/1-3e750456ca4431761d32.js" async=""></script><script src="/11-136b333296f119c7f06b.js" async=""></script><script src="/app-523774c7d59d91decc83.js" async=""></script><script src="/component---src-templates-blog-post-js-ceb71cbd593f5997e7c9.js" async=""></script></body></html>